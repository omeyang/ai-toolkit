# Bug 排查任务

请系统性地排查以下问题。

## 排查流程

### 1. 复现确认
- 明确复现步骤
- 确认预期行为 vs 实际行为
- 确定影响范围

### 2. 定位分析
- 从错误信息/日志逆推调用链
- 检查相关代码的最近变更 (`git log -p --follow`)
- 使用 `grep` 定位关键字
- 必要时添加调试日志

### 3. 根因分析
- 区分直接原因和根本原因
- 检查是否为并发问题（竞态、死锁）
- 检查是否为边界条件（nil、空值、超时）
- 检查是否为配置/环境问题

### 4. 修复方案
- 最小化修改，只修必须改的
- 添加回归测试覆盖此 bug
- 评估修复的影响范围
- 检查是否存在类似的潜在问题

## 输出格式

```
## Bug 报告

### 症状
[用户可见的错误表现]

### 根因
[代码层面的根本原因]
- 文件: path:line
- 原因: ...

### 修复
[具体的修复方案和代码变更]

### 回归测试
[新增的测试用例]

### 类似风险
[是否有同类问题需要检查]
```
