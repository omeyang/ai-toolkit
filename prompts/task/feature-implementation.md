# 功能实现任务

请按照以下流程实现新功能。

## 实现流程

### 1. 需求理解
- 明确输入/输出
- 确认边界条件和异常场景
- 识别与现有功能的交互点

### 2. 设计
- 确定涉及的包和文件
- 设计接口契约（先定义接口）
- 评估对现有代码的影响
- 如果改动超过 3 个文件，先用 EnterPlanMode 给出方案

### 3. 实现（TDD）
- RED: 先写失败的测试
- GREEN: 写最小实现让测试通过
- REFACTOR: 重构代码，保持测试绿色

### 4. 质量检查
- `go test -race -count=1 ./...`
- `golangci-lint run ./...`
- 检查错误处理完整性
- 检查 context 传播
- 检查日志和 trace 覆盖

### 5. 交付
- 确认所有测试通过
- 代码格式化 (`goimports`)
- 准备简洁的 commit message (Conventional Commits)

## 代码质量标准

- 核心逻辑测试覆盖率 > 90%
- 零 `golangci-lint` 错误
- 所有公开 API 有文档注释
- 错误消息包含足够的上下文信息
